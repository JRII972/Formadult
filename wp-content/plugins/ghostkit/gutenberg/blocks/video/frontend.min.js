!function(){"use strict";const{GHOSTKIT:e,jQuery:t}=window,o=t(document);function i(){t(".ghostkit-video-fullscreen:visible .ghostkit-video-fullscreen-frame").each((function(){const e=t(this),o=e.data("ghostkit-video-aspect-ratio")||16/9;let i,a;o>window.innerWidth/window.innerHeight?(i=.9*window.innerWidth,a=i/o):(a=.9*window.innerHeight,i=a*o),e.css({width:i,height:a,top:(window.innerHeight-a)/2,left:(window.innerWidth-i)/2})}))}const a=function(e,t,o,i){var a,n=!1,s=0;function l(){a&&clearTimeout(a)}function d(){for(var d=arguments.length,r=new Array(d),c=0;c<d;c++)r[c]=arguments[c];var u=this,v=Date.now()-s;function p(){s=Date.now(),o.apply(u,r)}function h(){a=void 0}n||(i&&!a&&p(),l(),void 0===i&&v>e?p():!0!==t&&(a=setTimeout(i?h:p,void 0===i?e-v:e)))}return"boolean"!=typeof t&&(i=o,o=t,t=void 0),d.cancel=function(){l(),n=!0},d}(200,(n=()=>{i()},s=[],l=null,d=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];s=t,l||(l=requestAnimationFrame((function(){l=null,n.apply(void 0,s)})))},d.cancel=function(){l&&(cancelAnimationFrame(l),l=null)},d));var n,s,l,d;t(window).on("DOMContentLoaded load resize orientationchange",(()=>{a()})),o.on("initBlocks.ghostkit",((o,a)=>{void 0!==window.VideoWorker&&(e.triggerEvent("beforePrepareVideo",a),t(".ghostkit-video:not(.ghostkit-video-ready)").each((function(){const e=t(this).addClass("ghostkit-video-ready"),o=e.attr("data-video"),n=e.attr("data-click-action"),s="true"===e.attr("data-video-autoplay"),l="true"===e.attr("data-video-autopause"),d="true"===e.attr("data-video-loop");let r=e.find(".ghostkit-video-fullscreen-close-icon");r=r.length?r.html():e.attr("data-fullscreen-action-close-icon")?'<span class="'.concat(e.attr("data-fullscreen-action-close-icon"),'"></span>'):"";const c=e.attr("data-fullscreen-background-color");let u=e.find(".ghostkit-video-poster"),v=!1,p=!1,h=0,g=e.attr("data-video-aspect-ratio");g=g&&g.split(":")[0]&&g.split(":")[1]?g.split(":")[0]/g.split(":")[1]:16/9,parseFloat(e.attr("data-video-volume"))||(h=1),s&&(h=1);const f=new window.VideoWorker(o,{autoplay:0,loop:d,mute:h,volume:parseFloat(e.attr("data-video-volume"))||0,showContols:1});if(f&&f.isValid()){let o=0,d=0,h=!1;e.on("click",(()=>{d||(d=1,"fullscreen"===n?o?v&&(e.removeClass("ghostkit-video-fullscreen-closed"),v.fadeIn(200),f.play()):(e.addClass("ghostkit-video-loading"),f.getIframe((o=>{p=t(o);const a=p.parent();v=t('<div class="ghostkit-video-fullscreen" style="background-color: '.concat(c,';">')).appendTo("body").append(t('<div class="ghostkit-video-fullscreen-close">'.concat(r,"</div>"))).append(t('<div class="ghostkit-video-fullscreen-frame">').append(p)),v.data("ghostkit-video-aspect-ratio",g),a.remove(),v.fadeIn(200),v.on("click",(o=>{const i=t(o.target);(i.hasClass("ghostkit-video-fullscreen")||i.hasClass("ghostkit-video-fullscreen-close")||i.closest(".ghostkit-video-fullscreen-close").length)&&(f.pause(),v.fadeOut(200),e.addClass("ghostkit-video-fullscreen-closed"))})),i()})),o=1):o?f.play():(e.addClass("ghostkit-video-loading"),f.getIframe((o=>{p=t(o);const i=p.parent();t('<div class="ghostkit-video-frame">').appendTo(e).append(p),i.remove()})),o=1))})),u.length||e.hasClass("is-style-icon-only")||f.getImageURL((o=>{u=t('<div class="ghostkit-video-poster"><img src="'.concat(o,'" alt=""></div>')),e.append(u)}));let k=!1;f.on("ready",(()=>{e.removeClass("ghostkit-video-loading"),"fullscreen"===n?e.hasClass("ghostkit-video-fullscreen-closed")||f.play():(e.addClass("ghostkit-video-playing"),f.play())})),f.on("play",(()=>{h=!0})),f.on("pause",(()=>{h=!1,k=!0,"fullscreen"===n&&(d=0)})),"fullscreen"!==n&&(s||l)&&a.throttleScroll((()=>{!k&&!h&&s&&a.isElementInViewport(e[0],.6)&&(d?f.play():e.click()),h&&l&&!a.isElementInViewport(e[0],.6)&&f.pause()}))}})),e.triggerEvent("afterPrepareVideo",a))}))}();